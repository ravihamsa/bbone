define(["require"],function(e){var t={},n={},r={type:"get",params:{},url:"",parser:_.identity,cache:"session"},i="";n.define=function(e,n){var i=_.extend({},r,n);t[e]=i};var s=n.getConfig=function(e){if(t[e])return _.clone(t[e]);throw Error("Undefined request by Id: "+e)};return n.getRequest=function(e,t){var n=s(e,t),r=$.extend(!0,{},n);r.url=i+r.url,r.paramParser&&(t=r.paramParser.call(null,t));if(r.mockData){var o=r.mockDelay||1e3,u=$.Deferred();return setTimeout(function(){console.warn("request "+r.id+" is being resolved with mock data"),u.resolve(r.mockData)},o),u}return n.type.toLowerCase()==="post"?(r.data=JSON.stringify(t),$.ajax(r)):n.type.toLowerCase()==="form_post"?$.post(r.url,t):(_.isEmpty(t)||(r.url+="?"+$.param(t)),$.ajax(r))},n.setServiceRoot=function(e){i=e},n});